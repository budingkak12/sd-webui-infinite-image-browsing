import{d as Y,a1 as j,r as M,o as Z,U as v,V as T,c as s,a4 as e,W as k,a3 as n,X as g,Y as u,a5 as F,L as ee,a6 as te,af as le,ag as A,$ as R,a2 as se,cI as ae,z as $,cJ as ie,ak as oe,ai as ne,T as re,a0 as ce}from"./index-6ab16bed.js";import{u as de,c as ue,a as me,F as pe,d as fe}from"./FileItem-f468afb1.js";import{a as ve,b as ke,c as ge,M as we,o as z,L as he,R as Ce,f as _e}from"./MultiSelectKeep-c0c11ea1.js";import"./numInput.vue_vue_type_style_index_0_scoped_bd954eda_lang-1044afee.js";/* empty css              */import"./_isIterateeCall-2cd62601.js";import"./index-f713c197.js";import"./shortcut-76ce1382.js";import"./Checkbox-a89ba0fa.js";import"./index-13fd2f6f.js";const Ie={class:"refresh-button"},Se={class:"hint"},ye={key:0,class:"preview-switch"},be=Y({__name:"randomImage",props:{tabIdx:{},paneIdx:{},id:{},paneKey:{}},setup(xe){const N=j(),m=M(!1),l=M([]),r=l,p=async()=>{try{m.value=!0;const a=await ae();a.length===0&&$.warn("No data, please generate index in image search page first"),l.value=a}finally{m.value=!1,C()}},w=()=>{if(l.value.length===0){$.warn("没有图片可以浏览");return}z(l.value,o.value||0)};Z(p);const{stackViewEl:B,multiSelectedIdxs:f,stack:P,scroller:U}=de({images:l}).toRefs(),{onClearAllSelected:D,onSelectAll:E,onReverseSelect:G}=ue();ve();const{itemSize:h,gridItems:K,cellWidth:L,onScroll:C}=me(),{showGenInfo:c,imageGenInfo:_,q:O,onContextMenuClick:W,onFileItemClick:q}=ke({openNext:ie}),{previewIdx:o,previewing:I,onPreviewVisibleChange:H,previewImgMove:S,canPreview:y}=ge(),b=async(a,t,d)=>{P.value=[{curr:"",files:l.value}],await W(a,t,d)};return(a,t)=>{var x;const d=oe,J=ne,Q=re;return v(),T("div",{class:"container",ref_key:"stackViewEl",ref:B},[s(we,{show:!!e(f).length||e(N).keepMultiSelect,onClearAllSelected:e(D),onSelectAll:e(E),onReverseSelect:e(G)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),k("div",Ie,[s(d,{onClick:p,onTouchstart:F(p,["prevent"]),type:"primary",loading:m.value,shape:"round"},{default:n(()=>[g(u(a.$t("shuffle")),1)]),_:1},8,["onTouchstart","loading"]),s(d,{onClick:w,onTouchstart:F(w,["prevent"]),type:"default",disabled:!((x=l.value)!=null&&x.length),shape:"round"},{default:n(()=>[g(u(a.$t("tiktokView")),1)]),_:1},8,["onTouchstart","disabled"])]),s(Q,{visible:e(c),"onUpdate:visible":t[1]||(t[1]=i=>te(c)?c.value=i:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=i=>c.value=!1)},{cancelText:n(()=>[]),default:n(()=>[s(J,{active:"",loading:!e(O).isIdle},{default:n(()=>[k("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto"},onDblclick:t[0]||(t[0]=i=>e(ee)(e(_)))},[k("div",Se,u(a.$t("doubleClickToCopy")),1),g(" "+u(e(_)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),s(e(fe),{ref_key:"scroller",ref:U,class:"file-list",items:l.value.slice(),"item-size":e(h).first,"key-field":"fullpath","item-secondary-size":e(h).second,gridItems:e(K),onScroll:e(C)},{default:n(({item:i,index:V})=>[s(pe,{idx:V,file:i,"cell-width":e(L),"full-screen-preview-image-url":e(r)[e(o)]?e(le)(e(r)[e(o)]):"",onContextMenuClick:b,onPreviewVisibleChange:e(H),"is-selected-mutil-files":e(f).length>1,selected:e(f).includes(V),onFileItemClick:e(q),onTiktokView:(Ve,X)=>e(z)(l.value,X)},null,8,["idx","file","cell-width","full-screen-preview-image-url","onPreviewVisibleChange","is-selected-mutil-files","selected","onFileItemClick","onTiktokView"])]),_:1},8,["items","item-size","item-secondary-size","gridItems","onScroll"]),e(I)?(v(),T("div",ye,[s(e(he),{onClick:t[3]||(t[3]=i=>e(S)("prev")),class:A({disable:!e(y)("prev")})},null,8,["class"]),s(e(Ce),{onClick:t[4]||(t[4]=i=>e(S)("next")),class:A({disable:!e(y)("next")})},null,8,["class"])])):R("",!0),e(I)&&e(r)&&e(r)[e(o)]?(v(),se(_e,{key:1,file:e(r)[e(o)],idx:e(o),onContextMenuClick:b},null,8,["file","idx"])):R("",!0)],512)}}});const Ue=ce(be,[["__scopeId","data-v-a0638a4d"]]);export{Ue as default};
