import{d as q,a1 as H,r as y,o as J,U as p,V as b,c as t,a4 as e,W as f,a3 as r,X as M,Y as v,K as Q,a6 as X,af as Y,ag as V,$ as A,a2 as j,cI as Z,z as ee,cJ as le,ak as te,ai as se,T as ie,a0 as ne}from"./index-40ac36f2.js";import{a as ae,b as oe,c as re,L as ce,R as de,f as ue,_ as me}from"./MultiSelectKeep-1264212b.js";import{u as pe,c as fe,a as ve,F as ge,d as _e}from"./FileItem-0284048a.js";import"./shortcut-8a584dd4.js";import"./Checkbox-15fcde4f.js";/* empty css              */import"./numInput.vue_vue_type_style_index_0_scoped_bd954eda_lang-a3eed423.js";import"./index-819118ae.js";import"./index-79d0524b.js";import"./_isIterateeCall-2083df16.js";const ke={class:"refresh-button"},we={class:"hint"},Ce={key:0,class:"preview-switch"},Ie=q({__name:"randomImage",props:{tabIdx:{},paneIdx:{},id:{},paneKey:{}},setup(Se){const F=H(),d=y(!1),n=y([]),a=n,g=async()=>{try{d.value=!0;const s=await Z();s.length===0&&ee.warn("No data, please generate index in image search page first"),n.value=s}finally{d.value=!1,k()}};J(g);const{stackViewEl:R,multiSelectedIdxs:u,stack:$,scroller:z}=pe({images:n}).toRefs(),{onClearAllSelected:N,onSelectAll:B,onReverseSelect:P}=fe();ae();const{itemSize:_,gridItems:T,cellWidth:K,onScroll:k}=ve(),{showGenInfo:c,imageGenInfo:w,q:U,onContextMenuClick:D,onFileItemClick:E}=oe({openNext:le}),{previewIdx:o,previewing:C,onPreviewVisibleChange:G,previewImgMove:I,canPreview:S}=re(),h=async(s,l,m)=>{$.value=[{curr:"",files:n.value}],await D(s,l,m)};return(s,l)=>{const m=me,O=te,L=se,W=ie;return p(),b("div",{class:"container",ref_key:"stackViewEl",ref:R},[t(m,{show:!!e(u).length||e(F).keepMultiSelect,onClearAllSelected:e(N),onSelectAll:e(B),onReverseSelect:e(P)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),f("div",ke,[t(O,{onClick:g,type:"primary",loading:d.value,shape:"round"},{default:r(()=>[M(v(s.$t("shuffle")),1)]),_:1},8,["loading"])]),t(W,{visible:e(c),"onUpdate:visible":l[1]||(l[1]=i=>X(c)?c.value=i:null),width:"70vw","mask-closable":"",onOk:l[2]||(l[2]=i=>c.value=!1)},{cancelText:r(()=>[]),default:r(()=>[t(L,{active:"",loading:!e(U).isIdle},{default:r(()=>[f("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto"},onDblclick:l[0]||(l[0]=i=>e(Q)(e(w)))},[f("div",we,v(s.$t("doubleClickToCopy")),1),M(" "+v(e(w)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),t(e(_e),{ref_key:"scroller",ref:z,class:"file-list",items:n.value.slice(),"item-size":e(_).first,"key-field":"fullpath","item-secondary-size":e(_).second,gridItems:e(T),onScroll:e(k)},{default:r(({item:i,index:x})=>[t(ge,{idx:x,file:i,"cell-width":e(K),"full-screen-preview-image-url":e(a)[e(o)]?e(Y)(e(a)[e(o)]):"",onContextMenuClick:h,onPreviewVisibleChange:e(G),"is-selected-mutil-files":e(u).length>1,selected:e(u).includes(x),onFileItemClick:e(E)},null,8,["idx","file","cell-width","full-screen-preview-image-url","onPreviewVisibleChange","is-selected-mutil-files","selected","onFileItemClick"])]),_:1},8,["items","item-size","item-secondary-size","gridItems","onScroll"]),e(C)?(p(),b("div",Ce,[t(e(ce),{onClick:l[3]||(l[3]=i=>e(I)("prev")),class:V({disable:!e(S)("prev")})},null,8,["class"]),t(e(de),{onClick:l[4]||(l[4]=i=>e(I)("next")),class:V({disable:!e(S)("next")})},null,8,["class"])])):A("",!0),e(C)&&e(a)&&e(a)[e(o)]?(p(),j(ue,{key:1,file:e(a)[e(o)],idx:e(o),onContextMenuClick:h},null,8,["file","idx"])):A("",!0)],512)}}});const ze=ne(Ie,[["__scopeId","data-v-633f5db9"]]);export{ze as default};
